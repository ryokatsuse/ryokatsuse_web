---
title: いいね機能を実装した
publishDate: "2026-02-03"
---

import LinkCard from '../../../components/LinkCard.astro';

このブログにAstro DBを使っていいね機能を実装しました。記事ページの上部にあるハートアイコンをクリックすると、いいねをすることができます。

気軽にいいねしてください！

<LinkCard url="https://docs.astro.build/en/guides/astro-db/" />


以前はAstro公式のAstro Studioというホスティングサービスがありましたが、2025年3月で終了したようです。

<LinkCard url="https://astro.build/blog/goodbye-astro-studio/" />

アナウンスとAstro DBのドキュメント通り、Tursoを使うということなので、AstroのドキュメントとTursoのドキュメントを確認して実装しました。

<LinkCard url="https://turso.tech/" />

## いいね機能について

シンプルに記事のslugをキーにして、いいね数をカウントする構造になっています。以前お気に入り機能を実装したときにAstro Sessionsを使っていたので、今回もそれを使いつつDBにいいねされている数を保存するようにしようとしました。

<LinkCard url="https://www.ryokatsu.dev//blog/2025/0422" />

しかしVercelのサーバーレス環境の問題なのか何度かリロードすると、セッションがリセットされてしまい、実際はカウントがあるのに0件になったりする問題があったため、最終的にはローカルストレージに記憶するようにしました。

いいね数のカウントについては、同じセッション内で判定しています。別ブラウザやシークレットモードなどを使うと、再度いいねできるめちゃくちゃカジュアルな仕様になっています。

設定やDBの作成、UIは自分で実装して、APIについては、Claude Codeで作り1時間ぐらいで完成しました。楽ちん！

別にいいね機能自体が作りたいわけではなく、Astro DBを使ってみたかっただけなので、満足です。

